<!DOCTYPE html>
<html>
  <head>
    <title>AlphaShoes</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= stylesheet_link_tag "https://fonts.googleapis.com/css?family=Rubik+Mono+One&display=swap"%>
  </head>

<div class="overlay">
        <%= image_tag("logos/cross-icon", id: "close-menu")%>
        <ul>
            <li id="home"><a href="/">HOME</a></li>
            <li id="about"><a href="/">ORDERS</a></li>
            <li id="projects"><a href="/">PRODUCTS</a></li>
            <% if logged_in? %>
              <li id="contact"><a href="/users/logout">LOG OUT</a></li>
            <% else %>
              <li id="contact"><a href="/users/login">LOG IN</a></li>
            <% end %>
        </ul>
  </div>

  <header>
    <nav>
      <ul id="nav-bar">
        <li>
            <%= image_tag("logos/hamburger", id: "overlay-hamburger")%>
        </li>
        <% if logged_in? %>
          <li id="logo-container">
            <div>
              <%= image_tag("logos/shopping-cart", id: "shoppingcart")%>
            </div>
            <div>
              <%= image_tag("logos/user", id: "user-logo")%>
              <p id="user-name"><%= current_user.detail.full_name %></p>
            </div>
          </li>
        <% else %>
        <li id="logo-container">
          <div>
            <p id="logo-title">ALPHA</p>
            <p id="logo-desc">SHOES</p>
          </div>
        </li>
        <% end %>
      </ul>
    </nav>
  </header>

  <body>
    <%= yield %>
    <footer>
      <ul id="footer">
        <li id="footer-left">ALL RIGHTS RESERVED</li>
        <li id="footer-right">ALPHA SHOES 2020</li>
      </ul>
    </footer>
  </body>

  <script>
    /* Mobile screen menu function*/

      const openMenu = document.getElementById("overlay-hamburger");
      const closeMenu = document.getElementById("close-menu");

      function showMenu() {
          let overlay = document.querySelector(".overlay");
          overlay.classList.add("show-menu");
      }
      openMenu.onclick = showMenu;

      function hideMenu() {
          let overlay = document.querySelector(".overlay");
          overlay.classList.add("show-menu-hiding");
          overlay.classList.remove("show-menu");
          const removeClass = () => {
              setTimeout(function() {overlay.classList.remove("show-menu-hiding"); }, 1200);
          }
          removeClass();
          

      }
      let listHome = document.getElementById("home");
      let listAbout = document.getElementById("about");
      let listProjects = document.getElementById("projects");
      let listContact = document.getElementById("contact");

      listHome.onclick = hideMenu;
      listAbout.onclick = hideMenu;
      listProjects.onclick = hideMenu;
      listContact.onclick = hideMenu;


      closeMenu.onclick = hideMenu;

  
      function toUserPage() {
        window.location.href = "/users/login"
      }

      let userLogo = document.getElementById("user-logo");
      userLogo.onclick = toUserPage
      

  </script>
 
</html>
